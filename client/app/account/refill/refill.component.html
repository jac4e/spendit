
<div class="row mt-3">
    <app-common-alerts id="refill-alert"></app-common-alerts>
</div>
<div class="row justify-content-center">
    <div class="mt-3 col-md-9 refill-form-card">
        <ng-container *ngIf="!refillSubmitted">
            <h5 class="my-auto">Refill your account:</h5>
            <form [formGroup]="refillForm" (ngSubmit)="onSubmit()">
                <div>
                    <input type="text" formControlName="amount" name="amount" class="form-control amount title-centered" placeholder="PHYC"/>
                </div>
                <fieldset>
                    <legend>Refill method:</legend>
                    <div>
                        <input formControlName="method" type="radio" id="cash" name="method" value="cash" />
                        <label for="cash" >In-person using cash</label>
                    </div>
                    <div>
                        <input formControlName="method" type="radio" id="etransfer" name="method" value="etransfer" />
                        <label for="etransfer" >Interact e-transfer to <a href="mailto:epclub@ualberta.ca">epclub@ualberta.ca</a></label>
                    </div>
                    <div>
                        <input formControlName="method" type="radio" id="card" name="method" value="card" />
                        <label for="card" >In-person using a debit or credit (Note: a 2.7% + 30 cent surcharge is added for credit cards)</label>
                    </div>
                    <div>
                        <input formControlName="method" type="radio" id="stripe" name="method" value="stripe" />
                        <label for="stripe" >Online using a stripe (Note: a 2.9% + 30 cent surcharge is added)</label>
                    </div>
                </fieldset>
                <button type="submit" class="btn btn-primary">Next</button>
            </form>
        </ng-container>
        <ng-container *ngIf="refillSubmitted">
            <ng-container *ngIf="refillStep === 'cash'">
                <h5 class="my-auto">Cash Step</h5>
                <p>An email has been sent to the club with your request. One of the execs will let you know when you can meet up with them to give them the cash.</p>
            </ng-container>
        </ng-container>
        <ng-container *ngIf="refillSubmitted">
            <ng-container *ngIf="refillStep === 'etransfer'">
                <h5 class="my-auto">Etransfer Step</h5>
                <p>Please send and interact e-transfer to <a href="mailto:epclub@ualberta.ca">epclub@ualberta.ca</a> with the following message: "{{requestedRefill?.id}}". The etransfer should be processed within 5 minutes; contact an exec if it takes longer.</p>
            </ng-container>
        </ng-container>
        <ng-container *ngIf="refillSubmitted">
            <ng-container *ngIf="refillStep === 'stripe'">
                <h5 class="my-auto">Stripe Step</h5>
                <ngx-stripe-elements [stripe]="stripe" [elementsOptions]="elementsOptions">
                    <ngx-stripe-payment [options]="paymentElementOptions" />
                </ngx-stripe-elements>
                <button (click)="pay()">PAY</button>
            </ng-container>
        </ng-container>
        <ng-container *ngIf="refillSubmitted">
            <ng-container *ngIf="refillStep === 'card'">
                <h5 class="my-auto">Card Step</h5>
                <p>An email has been sent to the club with your request. One of the execs will let you know when you can meet up to make the payment.</p>
            </ng-container>
        </ng-container>
    </div>
</div>

<div class="mt-3 row row justify-content-center" >
    <div class="col-12">
        <h3 class="title-centered">Refill History:</h3>
    </div>
</div>

<div class="row">
    <app-list [controls]="listControl" [exclude]="['note','account']" [getData]="refreshRefillHistory()" name="refillHistory"></app-list>
</div>

<!-- 
<form [formGroup]="paymentElementForm">
        <input matInput placeholder="name" formControlName="name" />
        <input matInput placeholder="Email" type="email" formControlName="email" />
        <input matInput placeholder="Address" formControlName="address" />
        <input matInput placeholder="ZIP Code" formControlName="zipcode" />
        <input matInput placeholder="city" formControlName="city" />
    @if (elementsOptions.clientSecret) {
    <ngx-stripe-elements [stripe]="stripe" [elementsOptions]="elementsOptions">
        <ngx-stripe-payment [options]="paymentElementOptions" />
    </ngx-stripe-elements>
    }
    <button (click)="pay()">PAY</button>
</form> -->